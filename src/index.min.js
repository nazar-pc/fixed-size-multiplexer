/*
 Copyright (c) 2017, Nazar Mokrynskyi
 @license   MIT License, see license.txt
*/
(function(){function f(a){var b;var c=0;var d=1;for(b=a.length-1;0<=b;--b){var e=a[b];c+=e*d;d*=Math.pow(2,8)}return c}function k(a,b){var c=new Uint8Array(b);for(--b;0<=b;--b){var d=b;var e=a%Math.pow(2,8);a=(a-e)/Math.pow(2,8);c.set([e],d)}return c}function h(a,b,c){a.l=b;a.f=c;for(a.b=1;b>=Math.pow(2,8);)++a.b,b/=Math.pow(2,8);a.a=new Uint8Array(0)}function d(a,b){if(!(this instanceof d))return new d(a,b);h(this,a,b);this.c=!0}function e(a,b){if(!(this instanceof e))return new e(a,b);h(this,a,
b);this.c=[]}var g={Multiplexer:d,Demultiplexer:e};"function"===typeof define&&define.c?define(function(){return g}):"object"===typeof exports?module.exports=g:this.fixed_size_multiplexer=g;d.prototype={feed:function(a){var b;var c=b=new Uint8Array(this.a.length+this.b+a.length);c.set(this.a);c.set(k(a.length,this.b),this.a.length);c.set(a,this.b+this.a.length);this.a=b;this.c=!1},have_more_blocks:function(){return!this.c},get_block:function(){var a;var b=new Uint8Array(this.f);if(this.g()){if(this.f>
this.a.length){var c=Math.ceil((this.f-this.a.length)/this.b);c=a=new Uint8Array(this.a.length+c*this.b);c.set(this.a);this.a=a;this.c=!0}b.set(this.a.subarray(0,this.f));this.a=this.a.subarray(this.f)}return b}};Object.defineProperty(d.prototype,"constructor",{enumerable:!1,value:d});e.prototype={feed:function(a){this.j()?this.c.push(a):this.g(a)},g:function(a){var b;var c=b=new Uint8Array(this.a.length+a.length);c.set(this.a);c.set(a,this.a.length);this.a=b},have_more_data:function(){this.i();return this.h()},
h:function(){for(var a;;){if(this.a.length<=this.b)return!1;if(a=f(this.a.subarray(0,this.b)))break;else this.a=this.a.subarray(this.b)}return this.a.length>=this.b+a},get_data:function(){if(!this.j())return null;var a=f(this.a.subarray(0,this.b));var b=this.a.subarray(this.b,this.b+a);this.a=this.a.subarray(this.b+a);return b},i:function(){for(var a;!this.h()&&this.c.length;)a=f(this.a.subarray(0,this.b)),a||(this.a=new Uint8Array(0)),this.g(this.c.shift())}};Object.defineProperty(e.prototype,"constructor",
{enumerable:!1,value:e})}).call(this);