/*
 Copyright (c) 2017, Nazar Mokrynskyi
 @license   MIT License, see license.txt
*/
(function(){function f(a){var b;var c=0;var d=1;for(b=a.length-1;0<=b;--b){var e=a[b];c+=e*d;d*=Math.pow(2,8)}return c}function k(a,b){var c=new Uint8Array(b);for(--b;0<=b;--b){var d=b;var e=a%Math.pow(2,8);a=(a-e)/Math.pow(2,8);c.set([e],d)}return c}function h(a,b,c){a.l=b;a.f=c;a.b=1;b>=Math.pow(2,8)&&++a.b;b>=Math.pow(2,16)&&++a.b;b>=Math.pow(2,32)&&++a.b;a.a=new Uint8Array(0)}function d(a,b){if(!(this instanceof d))return new d(a,b);h(this,a,b)}function e(a,b){if(!(this instanceof e))return new e(a,
b);h(this,a,b);this.c=[]}var g={Multiplexer:d,Demultiplexer:e};"function"===typeof define&&define.c?define(function(){return g}):"object"===typeof exports?module.exports=g:this.fixed_size_multiplexer=g;d.prototype={feed:function(a){var b;var c=b=new Uint8Array(this.a.length+this.b+a.length);c.set(this.a);c.set(k(a.length,this.b),this.a.length);c.set(a,this.b+this.a.length);this.a=b},have_more_blocks:function(){return 0<this.a.length},get_block:function(){var a=new Uint8Array(this.f);if(this.c()){var b=
Math.min(this.f,this.a.length);a.set(this.a.subarray(0,b));this.a=this.a.subarray(b)}return a}};Object.defineProperty(d.prototype,"constructor",{enumerable:!1,value:d});e.prototype={feed:function(a){this.j()?this.c.push(a):this.g(a)},g:function(a){var b;var c=b=new Uint8Array(this.a.length+a.length);c.set(this.a);c.set(a,this.a.length);this.a=b},have_more_data:function(){this.i();return this.h()},h:function(){if(this.a.length<=this.b)return!1;var a=f(this.a.subarray(0,this.b));a||(this.a=new Uint8Array(0));
return 0!==a&&this.a.length>=this.b+a},get_data:function(){if(!this.j())return null;var a=f(this.a.subarray(0,this.b));var b=this.a.subarray(this.b,this.b+a);this.a=this.a.subarray(this.b+a);return b},i:function(){for(var a;!this.h()&&this.c.length;)a=f(this.a.subarray(0,this.b)),a||(this.a=new Uint8Array(0)),this.g(this.c.shift())}};Object.defineProperty(e.prototype,"constructor",{enumerable:!1,value:e})}).call(this);